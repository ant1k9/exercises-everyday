<!DOCTYPE html>

<html>
<head>
  <title>Exercises everyday</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style type="text/css">
    body {
      margin: 0px;
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: 20px;
      line-height: 20px;
      background-color: #fff;
    }

    header {
      padding: 20px;
    }

    td,th {
      padding: 10px;
    }

    a {
      color: #444;
      text-decoration: none;
    }

    .progress {
      background-color: #aeb;
    }

    .regress {
      background-color: #fac;
    }

    .neutral {
      background-color: #feb;
    }
  </style>
</head>

<body>
  <header>
    <h1>Exercises</h1>
    <table>
      <form method="post" action="/exercise/done" id="exercise-submit">
        <tr>
          <td>
            <select name="type">
              {{ range .ExercisesTypes }}
              <option value="{{ . }}">{{ . }}</option>
              {{ end }}
            </select>
          </td>
          <td><input type="text" name="repeats"></td>
          <td><input type="submit" value="Done"></td>
        </tr>
      </form>

      <form method="post" action="/new/type" id="new-exercise-type">
        <tr>
          <td>New type of exercise:</td>
          <td><input type="text" name="type"></td>
          <td><input type="submit" value="Add"></td>
        </tr>
      </form>
    </table><br/>

    <table>
      <thead>
        <th>Type</th>
        <th>Last Week</th>
        <th>Current Week</th>
        <th>Change</th>
      </thead>
      <tbody>
        {{ $thisWeekStats := .ThisWeekStats }}
        {{ $lastWeekStats := .LastWeekStats }}
        {{ $changeStats := .ChangeStats }}
        {{ range $type := .ExercisesTypes }}
          {{ $last := index $lastWeekStats $type }}
          {{ $this := index $thisWeekStats $type }}
          {{ $change := index $changeStats $type }}
          <tr class="
              {{ if gt $this $last }} progress
              {{ else if lt $this $last }} regress
              {{ else }} neutral
              {{ end }}">
            <td>{{ $type }} </td>
            <td>{{ $last }}</td>
            <td>{{ $this }}</td>
            <td>{{ if ne $change "" }} {{ $change }}% {{ end }}</td>
          </tr>
        {{ end }}
      </tbody>
    </table><br/>
    <div>Estimated repeats: {{ .EstimatedRepeats }}</div>
  </header>
</body>
</html>
